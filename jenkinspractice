
pipeline {
  agent {
    label "Java"
  }
  environment {
    EMAIL_RECIPIENTS = 'pratheshyadav67@gmail.com'
    PATH = "/opt/apache-maven-3.9.2/bin:${PATH}"
  }

  stages {
    stage('Build') {
      steps {
        sh 'mvn clean install'
      }
    }
  stage('List Workspace') {
    steps {
        script {
            sh 'ls -la'
        }
    }
}
    stage('Send build artifacts over SSH') {
        steps{
                sshPublisher(publishers: [sshPublisherDesc(configName: 'Tomcat_Deploy', transfers: [sshTransfer(cleanRemote: false, excludes: '', execCommand: '', execTimeout: 120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes: false, patternSeparator: '[, ]+', remoteDirectory: '/home/tomcat/apache-tomcat-10.1.30/webapps', remoteDirectorySDF: false, removePrefix: '', sourceFiles: 'SimplwWebApplication.war')], usePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])
            }
        }
 }
}
